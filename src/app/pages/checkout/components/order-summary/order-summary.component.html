<div class="order-summary-container">
  <h3 class="summary-title">{{ "ORDER_SUMMARY" | translate }}</h3>

  <div class="summary-section">
    <!-- Order Items Summary -->
    <div
      class="summary-items"
      *ngIf="orderDetails() && orderDetails().length > 0"
    >
      <h4>{{ "ORDER_ITEMS" | translate }} ({{ orderDetails().length }})</h4>

      <div class="item" *ngFor="let item of orderDetails()">
        <div class="item-details">
          <span class="item-name">
            {{
              currentLang() === "ar"
                ? item.product.ar_name
                : item.product.en_name
            }}
          </span>
          <span class="item-qty">x{{ item.quantity }}</span>
        </div>
        <span class="item-price"
          >{{ formatPrice(item.subtotal) }} {{ "CURRENCY" | translate }}</span
        >
      </div>
    </div>

    <!-- Order Costs -->
    <div class="summary-costs">
      <div class="cost-line">
        <span>{{ "SUBTOTAL" | translate }}</span>
        <span
          >{{ formatPrice(getSubtotal()) }} {{ "CURRENCY" | translate }}</span
        >
      </div>

      <div class="cost-line">
        <span>{{ "SHIPPING" | translate }}</span>
        <span *ngIf="deliveryFee > 0"
          >{{ formatPrice(deliveryFee) }} {{ "CURRENCY" | translate }}</span
        >
        <span *ngIf="deliveryFee === 0" class="free-shipping">{{
          "FREE" | translate
        }}</span>
      </div>

      <div class="cost-line">
        <span>{{ "TAX" | translate }}</span>
        <span>{{ formatPrice(taxAmount) }} {{ "CURRENCY" | translate }}</span>
      </div>

      <div class="cost-line total">
        <span>{{ "TOTAL" | translate }}</span>
        <span class="total-amount"
          >{{ formatPrice(getTotal()) }} {{ "CURRENCY" | translate }}</span
        >
      </div>
    </div>
  </div>

  <!-- Promo Code Section -->
  <div class="promo-section">
    <h4>{{ "PROMO_CODE" | translate }}</h4>
    <div class="promo-input">
      <input
        type="text"
        [(ngModel)]="promoCode"
        [placeholder]="'ENTER_PROMO_CODE' | translate"
        [disabled]="loading"
      />
      <app-button
        [title]="'APPLY' | translate"
        [isLoading]="loading"
        (click)="applyPromoCode()"
        [disabled]="!promoCode.trim() || loading"
        [px]="'px-4'"
        [py]="'py-2'"
        type="button"
      ></app-button>
    </div>
  </div>

  <!-- Proceed to Payment Button -->
  <div class="action-section">
    <app-button
      [title]="'PROCEED_TO_PAYMENT' | translate"
      [isLoading]="loading"
      (click)="proceedToPayment()"
      [disabled]="!selectedAddress || loading"
      [px]="'px-6'"
      [py]="'py-3'"
      type="button"
      class="w-full"
    ></app-button>
  </div>
</div>
